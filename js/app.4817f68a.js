(function(e){function t(t){for(var a,s,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);m&&m(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},s={app:0},o={app:0},i=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-8cd433a8":"7c18df96","chunk-f72d3250":"568697d3"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-8cd433a8":1,"chunk-f72d3250":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-8cd433a8":"6a6a4e2b","chunk-f72d3250":"da2b0ca2"}[e]+".css",o=l.p+a,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var c=i[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===o))return t()}var p=document.getElementsByTagName("style");for(r=0;r<p.length;r++){c=p[r],u=c.getAttribute("data-href");if(u===a||u===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete s[e],m.parentNode.removeChild(m),n(i)},m.href=o;var d=document.getElementsByTagName("head")[0];d.appendChild(m)})).then((function(){s[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=r(e);var p=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",p.name="ChunkLoadError",p.type=a,p.request=s,n[1](p)}o[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/rasmus2.0/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var m=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0555":function(e,t,n){e.exports={locationInput:"LocationInput_locationInput_1Fmax",label:"LocationInput_label_2zvAB",labelText:"LocationInput_labelText_11IFD",input:"LocationInput_input_ivqJH",spinner:"LocationInput_spinner_2ic4d",resetLocationBtn:"LocationInput_resetLocationBtn_1OP_2",suggestionsFocusTrap:"LocationInput_suggestionsFocusTrap_2GLp_",suggestions:"LocationInput_suggestions_3I4sW",suggestion:"LocationInput_suggestion_3aHOF",suggestionFavorite:"LocationInput_suggestionFavorite_32Xn6",nearbySuggestion:"LocationInput_nearbySuggestion_2f59C"}},"0622":function(e,t,n){"use strict";var a=n("9155"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"08b8":function(e,t,n){e.exports={header:"Header_header_1rqvn",title:"Header_title_xw9kv",logo:"Header_logo_1oluv"}},"23f2":function(e,t,n){"use strict";var a=n("287e"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"287e":function(e,t,n){e.exports={updateAvailable:"UpdateAvailable_updateAvailable_uZAhH",updateAvailableActive:"UpdateAvailable_updateAvailableActive_1qO1M",reloadLink:"UpdateAvailable_reloadLink_10vaV",closeBtn:"UpdateAvailable_closeBtn_14n-V"}},"33fd":function(e,t,n){e.exports={tabs:"Tabs_tabs_1QR2X",tab:"Tabs_tab_15Faw",tabSmall:"Tabs_tabSmall_3oxul",tabActive:"Tabs_tabActive_5B2qN",tabApi:"Tabs_tabApi_1DbIs",tabDisabled:"Tabs_tabDisabled_2LyC1",link:"Tabs_link_3QSdo",text:"Tabs_text_3eg7N",icon:"Tabs_icon_2bT33"}},"452c":function(e,t,n){},"4a4d":function(e,t,n){e.exports={tripsTable:"TripsTable_tripsTable_seMaN",showingJourneyDetails:"TripsTable_showingJourneyDetails_2vlip",table:"TripsTable_table_2aCjV",tableHead:"TripsTable_tableHead_35rh1",trip:"TripsTable_trip_3L8k2",strikeOut:"TripsTable_strikeOut_2lvIH",tripLine:"TripsTable_tripLine_1UetD","dark-mode":"TripsTable_dark-mode_3_pC1",tripName:"TripsTable_tripName_1S77x",tripTime:"TripsTable_tripTime_MCuJO",tripNewTime:"TripsTable_tripNewTime_1TU8j",isLate:"TripsTable_isLate_332Tg",tripTrack:"TripsTable_tripTrack_hi4oT",tripNote:"TripsTable_tripNote_364hW",VT:"TripsTable_VT_zu_SE",TV:"TripsTable_TV_1mpPl",SL:"TripsTable_SL_1kF6p"}},"55a3":function(e,t,n){"use strict";var a=n("4a4d"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"56d7":function(e,t,n){"use strict";n.r(t);n("2dd2");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.app,attrs:{id:"app"}},[n("Header"),n("div",{class:e.$style.container},[n(e.currentTabComponent.componentName,{tag:"component"}),n("AppSettings",{class:[e.$style.appSettings,e.showSettings&&e.$style.appSettingsVisible]})],1),n("nav",{class:e.$style.nav},[n("Tabs",{attrs:{tabs:e.tabs,"current-tab":e.currentTab,"show-settings":e.showSettings}})],1),n("UpdateAvailable"),n("InstallToHomeScreenPrompt"),n("OfflineIndicator")],1)},o=[],i=n("2f62"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{class:e.$style.header},[n("div",{class:e.$style.title},[n("img",{class:e.$style.logo,attrs:{src:"img/icons/apple-touch-icon-76x76.png",alt:"app logo"}}),n("span",[e._v("Resmus")])]),e.isLoadingTrips?n("font-awesome",{attrs:{icon:"spinner",spin:""}}):e._e(),n("span",[e._v(e._s(e.apiName))])],1)},l=[];const c={VT:"Västtrafik",TV:"Trafikverket"};var u={name:"Header",computed:{...Object(i["e"])({apiName:({api:e})=>c[e.name]}),...Object(i["e"])("trips",{isLoadingTrips:({isLoading:e})=>e})}},p=u,m=n("5e98"),d=n("2877");function b(e){this["$style"]=m["default"].locals||m["default"]}var g=Object(d["a"])(p,r,l,!1,b,null,null),h=g.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.$style.container,e.className]},[n("h2",[e._v("Inställningar")]),n("p",{class:e.$style.label},[e._v("API")]),n("div",{class:e.$style.apis},e._l(e.apis,(function(t){return n("button",{key:t,class:[e.$style.apiBtn,t===e.apiName&&e.$style.apiBtnActive],on:{click:function(n){return e.toggleApi(t)}}},[e._v(" "+e._s(e.getLongName(t))+" "),t===e.apiName&&e.initializing?n("font-awesome",{attrs:{icon:"spinner",spin:""}}):e._e()],1)})),0),n("p",{class:e.$style.label},[e._v("Other")]),n("p",[n("label",[e._v(" Dark/Light mode: "),n("select",{class:e.$style.timeSpan,attrs:{name:"darkMode"},on:{change:e.updateDarkMode}},e._l(e.viewModes,(function(t){return n("option",{key:t.value,domProps:{selected:t.value===e.viewMode,value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),0)])]),n("p",[n("label",[e._v(" Hämta resor inom: "),n("select",{class:e.$style.timeSpan,attrs:{name:"timeSpan"},on:{change:e.updateFilter}},e._l(e.timeSpans,(function(t){return n("option",{key:t.value,domProps:{selected:t.value===e.filter.timeSpan,value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),0)])]),n("p",[n("label",{class:e.$style.voice},[e._v(" Uppläsning: "+e._s(e.options.voice?"På":"Av")+" "),n("font-awesome",{attrs:{icon:["fas",e.options.voice?"volume-up":"volume-off"]}}),n("input",{class:e.$style.voiceCheckbox,attrs:{name:"voice",type:"checkbox"},domProps:{checked:e.options.voice},on:{input:e.updateOption}})],1)]),n("p",{class:e.$style.label},[e._v("Build info")]),n("div",[n("p",[e._v(e._s(e.buildTime))])])])},v=[],y={DOG:"T3JkZXJnaXZuaW5nIHBnYS4gdOVnZvZyaW5n",DOS:"T3BlcmF0aXZhIHN09mRzeXN0ZW0=",DOS01:"VGVzdCBDQVRPLCBETE8gQm9kZW4=",DPR:"UHJpb3JpdGVyaW5n",DPR03:"RHJpZnRsZWRuaW5nZW4gcHJpb3JpdGVyYXI=",DPS:"UGVyc29uYWw=",DPS01:"RmVsYWt0aWcgaGFudGVyaW5nL2Jlc2x1dA==",DPS02:"UmVzdXJzYnJpc3Q=",DPS03:"RmVsYWt0aWd0IGzkbW5hZCB0cmFmaWtpbmZvcm1hdGlvbg==",DTB:"VOVndHLkbmdzZWwgYmFuZ+VyZA==",DTT:"TWlzc3Tkbmt0IGZlbCBpIGv2cnBsYW4vIGZlbHBsYW5lcmluZw==",FAT:"U3T2cnQgYXYgYW5uYXQgdOVn",FOI:"T21sb3BwL2luduRudGFu",FOI01:"SW525G50YXIgdmFnbmFyIGZy5W4gdOVn",FOI02:"T21rb3BwbGluZ3N0aWQg9nZlcnNrcmlkZW4=",FOI03:"T21sb3BwIHTlZ3BlcnNvbmFs",FOI04:"SW525G50YWQgZvZyYmluZGVsc2UgKGFuduRuZHMgZWop",FOI05:"VOVnduRuZG5pbmcvT21sb3BwL1TlZ2zkbms=",FTF:"VOVnZvZyaW5n",FTF01:"TfZ0ZS9Lb3JzYW5kZSB05Wd25Gc=",FTF02:"RvZyYmln5W5n",FTF03:"VOVnIGb2cmUvc3DlcmJyaXN0",IBA:"QmFuZ+VyZHNhbmzkZ2duaW5nYXI=",IBA01:"QmFuZ+VyZHNiZWx5c25pbmcgJiBQbGF0dGZvcm1zYmVseXNuaW5n",IBA02:"UGxhdHRmb3JtIG9jaCBsYXN0a2Fq",IBA03:"UGxhdHRmb3Jtc/Z2ZXJn5W5n",IBA04:"UmFuZ2VyYnJvbXNzeXN0ZW0=",IBA05:"U3DlcnNw5HJy",IBA06:"U3RvcHBib2Nr",IBA07:"QnJvbXNwcm92YW5s5GdnbmluZw==",IBA08:"VOVnIG9jaCBsb2t25HJtZWFubORnZ25pbmc=",IBA09:"VmFnbnblZw==",IBA10:"VuRuZHNraXZh",IBT:"QmFuYXJiZXRlL3RyYW5zcG9ydA==",IBT01:"UGVyc29uYWxicmlzdA==",IBT02:"RmVscGxhbmVyaW5n",IBT03:"TWF0ZXJpYWxmZWwsIG1hdGVyaWFsYnJpc3Q=",IBT04:"TWFza2luZmVsLCBtYXNraW5icmlzdA==",IBT05:"VuRkZXJsZWs=",IBT06:"SW5nZXQgYmVob3Y=",IBT07:"VOVnZvZyaW5n",IBT08:"T21wcmlvcml0ZXJpbmcgKHRpbGwgZvZybeVuIGb2ciBhbm5hdCB1cHBkcmFnKQ==",IBT09:"SW5nZW4gdXBwZ2lmdCBmcuVuIHRpbGxzeW5pbmdzbWFu",IBT10:"VGVsZWZvbmv2",IBU:"QmFudW5kZXJieWdnbmFk",IBU01:"QmFuaw==",IBU02:"U2vkcm5pbmc=",IBU03:"VHJ1bW1h",IBU04:"QnJv",IBU05:"VHVubmVs","IBÖ":"QmFu9nZlcmJ5Z2duYWQ=","IBÖ01":"U3Dlcg==","IBÖ02":"U3DlcnbkeGVs",IEA:"RWxhbmzkZ2duaW5nYXI=",IEA01:"S29udGFrdGxlZG5pbmc=",IEA02:"SGrkbHBrcmFmdGxlZG5pbmc=",IEA03:"RvZyZGVsbmluZ3NzdGF0aW9u",IEA04:"S29wcGxpbmdzY2VudHJhbA==",IEA05:"TWF0YXJsZWRuaW5n",IEA06:"RnLlbnNraWxqYXJzdGF0aW9u",IEA07:"TuR0c3RhdGlvbg==",IEA08:"T21mb3JtYXJzdGF0aW9u",IEA09:"U2VrdGlvbmVyaW5nc3N0YXRpb24=",IEA10:"VHJhbnNmb3JtYXRvcnN0YXRpb24=",IEA11:"RWxkcmlmdGxlZG5pbmdzc3lzdGVt",IEA12:"VGVrbmlrYnlnZ25hZA==",IFK:"RnJhbWtvbWxpZ2hldCBpIHNw5XIgcGdhLiB25GRlcg==",IFK01:"U3DlcmhhbGth",IFK02:"U272IG9jaCBpcw==",ISA:"U2lnbmFsYW5s5GdnbmluZ2Fy",ISA01:"QmFsaXNncnVwcA==",ISA02:"UGxhbmtvcnNuaW5n",ISA03:"UG9zaXRpb25lcmluZ3NzeXN0ZW0=",ISA04:"U2lnbmFs",ISA05:"U2lnbmFsc3TkbGx2ZXJrLCBSQkMgb2NoIGxpbmplYmxvY2tlcmluZ3NzeXN0ZW0=",ISA06:"UmFuZ2Vyc3TkbGx2ZXJr",ISA07:"VGF2bGE=",ISA08:"VOVnbGVkbmluZ3NzeXN0ZW0gLSBBUkdVUw==",ISA09:"VOVnbGVkbmluZ3NzeXN0ZW0gLSBFQklDT1MgVE1T",ISA10:"VOVnbGVkbmluZ3NzeXN0ZW0gLSBFQklDT1MgOTAwICYgRUJJQ09TIDkwMCBOVA==",ISA11:"VOVnbGVkbmluZ3NzeXN0ZW0gLSBKWkEgMTEgKFJlbORmamIp",ISA12:"VOVnbGVkbmluZ3NzeXN0ZW0gLSBFUlRNUw==",ITA:"VGVsZWFubORnZ25pbmdhcg==",ITA01:"RGV0ZWt0b3I=",ITA02:"S2FiZWxhbmzkZ2duaW5n",ITA03:"UmFkaW9hbmzkZ2duaW5n",ITA04:"U2lnbmFsdGVsZWZvbg==",ITA05:"VGVsZWNlbnRyYWw=",ITA06:"VGVsZXN0YXRpb25zYW5s5GdnbmluZw==",ITA07:"VGVsZXRyYW5zbWlzc2lvbnNhbmzkZ2duaW5n",ITA08:"RHluYW1pc2sgc2t5bHQ=",ITA09:"SPZndGFsYXJzeXN0ZW0=",ITA10:"S2xvY2tvcg==","IÖA":"1nZyaWdhIGFubORnZ25pbmdhcg==","IÖA01":"RmFzdGlnaGV0","IÖA02":"SORnbmFk","IÖA03":"S2FuYWxpc2F0aW9u","IÖA04":"UuRsc3Nt9nJqbmluZ3NhcHBhcmF0","IÖA05":"U272Z2FsbGVyaQ==","IÖA06":"VuRn","IÖA07":"QXZ2YXR0bmluZywgcHVtcHN5c3RlbQ==","IÖA08":"1nZlcnZha25pbmdza2FtZXJh",JAS:"QXZ2aWthbmRlIHNhbW1hbnPkdHRuaW5n",JAS01:"1nZlcnNranV0YW5kZSBsYXN0cHJvZmlsL0ZhcmxpZ3QgZ29kcw==",JAS02:"TOVuZ3QgdOVn",JAS03:"RvZyIHR1bmd0IHTlZw==",JAS04:"UmFwcG9ydGVyaW5n",JAS05:"TG9rdHJhbnNwb3J0",JDE:"U2VudCBmcuVuIGRlcOU=",JDE10:"VGVybWluYWx0auRuc3Q=",JDE11:"1nZlciAxMCBtaW51dGVyIHNlbnQgdGlsbCBkZXDl",JDE12:"SGFuZGhhdmFuZGVmZWw=",JDE13:"QWt1dCBmZWxhdmhq5GxwbmluZw==",JDE14:"UGVyc29uYWxicmlzdA==",JDE15:"RvZyYXJlIGtsYXJhbm3kbHQgdOVnIHNlbnQ=",JDE16:"VXRlYmxpdmVuIGtsYXJyYXBwb3J0",JDE20:"1nZyaWd0",JDE21:"Rm9yZG9uc2JyaXN0",JDE22:"RXh0cmF05WcgYmVzdORsbHQ=",JDE23:"1nZyaWcgZXh0cmEgYmVzdORsbG5pbmc=",JDE24:"SW5nZW4gbm90ZXJpbmc=",JDE25:"RvZyYXJlIHNlbiBlbGxlciBzYWtuYXM=",JDE30:"U3TkZA==",JDE31:"U3TkZGxldmVyYW509nIg9nZlcnNrcmlkZXIgdGlk",JDE32:"RvZyc2VuaW5nIHBnYSB1bmRlcmxldiBTdORk",JDE33:"U3TkZGFyYiBlaiBnb2Rr5G50IEpG",JDE40:"VmVya3N0YWQ=",JDE41:"VmVya3N0YWQg9nZlcnNrcmlkZXIgdGlk",JDE42:"RvZycyBwZ2EgdW5kZXJsZXYgVnN0",JDE43:"VnN0LWFyYiBlaiBnb2Rr5G50IGF2IEpG",JDE45:"RvZyc2VuaW5nIHBnYSBhbm5hbiBsZXY=",JDE50:"SW5mcmFzdHJ1a3R1cg==",JDE51:"QmFuYXJiZXRl",JDE52:"U3DlcmZlbA==",JDE53:"VuR4ZWxmZWw=",JDE54:"U2lnbmFsZmVs",JDE55:"S1RMLWZlbCwgc3Dkbm5pbmdzbPZzIGt0bA==",JDE56:"U272IG9jaCBpcw==",JDE57:"S/Zyb3JkZXIgZ+VyIGVqIGF0dCBm5Q==",JDE60:"VHJhZmlrbGVkbmluZw==",JDE61:"U3RsdiBlaiBsZXZlcmVyYXQgaSB0aWQ=",JDE62:"U3RsdiBn5XIgZWogYXR0IG7l",JDE63:"VFJWIERMQyBmZWxha3RpZyBtYW72dmVy",JDE64:"RGlmZiBrbGFycmFwcC9hdmzkc24gcGt0",JDM:"RHJhZ2ZvcmRvbiAvIG1vdG9ydmFnbg==",JDM01:"QVRDLWZlbA==",JDM02:"TG9rYnl0ZQ==",JDM03:"U3Ry9m1hdnRhZ2FyZQ==",JDM04:"SGp1bHNrYWRh",JDM05:"QnJvbXNmZWw=",JDM06:"T21zdGFydCBhdiBzeXN0ZW0=",JDM08:"TWFza2luZmVs",JDM09:"RPZycmZlbA==","JFÖ":"RvZyYXJwZXJzb25hbA==","JFÖ01":"RvZyYXJwZXJzb25hbCBzYWtuYXM=","JFÖ02":"UGVyc29uYWxieXRl","JFÖ03":"UmFzdA==",JJF:"SW5nZW4gdXBwZ2lmdCBmcuVuIEpG",JOM:"T21ib3JkcGVyc29uYWw=",JOM01:"U2FrbmFz",JOM02:"UGVyc29uYWxieXRl",JPR:"UHJpb3JpdGVyaW5n",JPR01:"RXR0IEpGIGhhciBiZXN05G10IHByaW9yaXRlcmluZ2VuIG1lbGxhbiBlZ25hIHTlZw==",JPR02:"VHblIEpGIGhhciBiZXN05G10IHByaW9yaXRlcmluZ2VuIG1lbGxhbiB2YXJhbmRyYXMgdOVn",JST:"U3RhdGlvbuRyIHBlcnNvbmFs",JST01:"U3RhdGlvbuRyIHBlcnNvbmFsIHNha25hcw==",JTP:"VGVybWluYWwvUGxhdHRmb3JtLWhhbnRlcmluZw==",JTP01:"RnVybmVyaW5n",JTP02:"RvZyc2VuYWQgbGFzdG5pbmcvbG9zc25pbmc=",JTP03:"UG9zdA==",JTP04:"SW525G50YWQgZuRyamE=",JTP05:"SW525G50YXIgdmFnbmFyIGZy5W4ga3VuZA==",JTP06:"VuR4bGluZ3Ny9nJlbHNlIGl25Gdlbg==",JTP07:"UmFuZ2VyL1Z4bCB1dPZ2ZXIgcGxhbg==",JTP08:"T3BsYW5lcmFkIHNhbW1hbnPkdHRuaW5n",JTP09:"RmVsduR4bGF0IGxvaw==",JTP10:"U2thZGEgdGVybWluYWxsb2s=",JTP11:"VGVybWluYWxsb2sgc2FrbmFz",JTP12:"QnJvbXNwcm92bmluZ3NhbmzkZ2duaW5n",JTP13:"SkYg9m5za2Vt5Ww=",JTP14:"TG9rIHNha25hcyBw5SBnb2RzYmFuZ+VyZA==",JTP15:"1nZlcnNrcmlkZW4ga2xhcmf2cmluZ3N0aWQgcOUgZ29kc2JhbmflcmQ=",JTP16:"SW525G50YWQgZvZyYmluZGVsc2UgYnVzcy90YXhp",JVA:"VmFnbg==",JVA01:"RPZycmZlbA==",JVA02:"QnJvbXNmZWw=",JVA03:"SGp1bHNrYWRh",JVA04:"TGFzdGb2cnNranV0bmluZy9GZWxsYXN0bmluZy9MYXN0anVzdGVyaW5n",JVA05:"U2rkbHZhdmtvcHBsaW5nL0F2c2xpdGV0IHTlZw==",JVA06:"VmFnbnN5bg==","OBÖ":"QnJv9nBwbmluZw==","OBÖ01":"QnJv9nBwbmluZ3N0aWQg9nZlcnNrcmlkZW4=","OBÖ02":"UGxhbmVyYWQgYnJv9nBwbmluZ3N0aWQ=",ODJ:"RGp1cg==",ODJ01:"UOVr9nJ0IHZpbHQ=",ODJ02:"TGV2YW5kZSBlbGxlciBw5Wv2cmRhIHRhbWRqdXI=",ODJ03:"TGV2YW5kZSBlbGxlciBw5Wv2cmRhIHJlbmFy","OMÄ":"TeRubmlza2E=","OMÄ01":"UOVr9nJkIHBlcnNvbg==","OMÄ02":"T2JlaPZyaWdhIGkgc3DlcmV0","OMÄ03":"UG9saXMvc2p1a2RvbQ==","OMÄ04":"U2Fib3RhZ2UvaG90",ONA:"TmF0dXJo5G5kZWxzZXI=",ONA01:"QnJhbmQ=",ONA02:"1nZlcnN25G1uaW5n",ONA03:"U3Rvcm0vU272c3Rvcm0=",ONA04:"TGF2aW4=",ONA05:"U2tyZWQ=",ONA06:"S3lsYQ==",OSY:"QXZzeW5pbmcgYXYgYmFuYS9mb3Jkb24=",OSY01:"QmFuYQ==",OSY02:"Rm9yZG9u","OTÅ":"VOVnL2FyYmV0c3L2cmVsc2U=","OTÅ01":"VXJzcOVybmluZy9rb2xsaXNpb24=","OTÅ02":"UGxhbmtvcnNuaW5nc29seWNrYQ==","OTÅ03":"QVRDLW72ZGJyb21z","OTÅ04":"T3RpbGzldGVuIHN0b3Bwc2lnbmFsLXBhc3NhZ2U=","OTÅ05":"VXBwa/ZyZCB25HhlbA==",OUT:"U2VudCB0aWxsL2Zy5W4gdXRsYW5kIGVsbGVyIGFubmFuIGluZnJhc3RydWt0dXJm9nJ2YWx0YXJl",OUT01:"UGFzcy90dWxs","OVÄ":"T3Rq5G5saWcgduRkZXJsZWsgcOUgYmFuZ+VyZA=="};const T="2dfa6ea579bd45e3ac3810eb1a97adb6",_=`<LOGIN authenticationkey="${T}" />`,S={},I={TRAIN_STATION:"TrainStation",TRAIN_MESSAGE:"TrainMessage",TRAIN_ANNOUNCEMENT:"TrainAnnouncement"},A={TrainStation({lat:e,long:t,name:n}={},a=500){return n?`\n        <FILTER>\n          <AND>\n            <LIKE name="AdvertisedLocationName" value="/^${n}/" />\n            <EQ name="Advertised" value="true" />\n          </AND>\n        </FILTER>\n      `:e&&t?`\n        <FILTER>\n          <AND>\n            <WITHIN name="Geometry.WGS84" shape="center" value="${t} ${e}" radius="${a}m" />\n            <EQ name="Advertised" value="true" />\n          </AND>\n        </FILTER>\n      `:"<FILTER />"},TrainMessage(e){return`\n      <FILTER>\n        <EQ name="TrafficImpact.AffectedLocation" value="${e}" />\n      </FILTER>\n    `},TrainAnnouncement(e){return`\n      <FILTER>\n        <AND>\n          <EQ name="Advertised" value="true" />\n          <EQ name="ActivityType" value="Avgang" />\n          <EQ name="LocationSignature" value="${e}" />\n          <GT name="AdvertisedTimeAtLocation" value="$dateadd(00:00:00)" />\n          <LT name="AdvertisedTimeAtLocation" value="$dateadd(05:00:00)" />\n        </AND>\n      </FILTER>\n    `}};function k(e,{apiVersion:t=1.3,schemaVersion:n}={},...a){if(t>=2&&!n)throw Error("schemaVersion must be defined when apiVersion >= 2");const s=`\n  <QUERY\n    objecttype="${e}"\n    ${n?`schemaversion="${n}"`:""}\n    ${e===I.TRAIN_ANNOUNCEMENT?'orderby="AdvertisedTimeAtLocation"':""}\n  >\n    ${A[e](...a)}\n  </QUERY>`;return fetch(`https://api.trafikinfo.trafikverket.se/v${t}/data.json`,{body:`\n      <REQUEST>\n        ${_}\n        ${s}\n      </REQUEST>\n    `,method:"POST",mode:"cors",headers:{"Content-Type":"text/xml"}}).then(e=>{const t=e.json().then(e=>e.RESPONSE.RESULT);return e.ok?t:t.then(e=>Promise.reject(e))}).then(t=>t[0][e]||[]).catch(e=>console.error(e))}function D(e){return console.log(e||"No results"),e}function w(e){return Object.assign({},e,{name:e.AdvertisedLocationName,id:e.LocationSignature,region:"TV"})}function Z({lat:e,lng:t}){return k(I.TRAIN_STATION,{},{lat:e,long:t},5e3).then(e=>e.slice(0,5).map(w))}let J,L;const N=new Promise((e,t)=>{J=e,L=t});var $={init(){return k(I.TRAIN_STATION).then(e=>(e.forEach(e=>{S[e.LocationSignature]=e.AdvertisedLocationName}),J(S))).catch(L)},getClosestStops:Z,getClosestStop(e){return Z(e).then(e=>e[0])},getTrafficSituations(e){return k(I.TRAIN_MESSAGE,{apiVersion:2,schemaVersion:"1.6"},e).then(D).then(e=>({messages:e.map(({ExternalDescription:e,ReasonCode:t})=>e+` (${t.map(({Code:e,Description:t})=>t+" - "+atob(y[e])).join(", ")})`)}))},async getDeparturesFrom(e){return k(I.TRAIN_ANNOUNCEMENT,{},e).then(e=>(e||[]).slice(0,30)).then(D).then(async e=>(await N,e)).then(e=>e.map(e=>({...e,id:e.ActivityId,direction:e.ToLocation&&(S[e.ToLocation[0].LocationName]||""),via:e.ViaToLocation&&(S[e.ViaToLocation[0].LocationName]||""),name:""+e.ProductInformation.join(" "),time:e.AdvertisedTimeAtLocation.substr(-8,5),timestamp:new Date(e.AdvertisedTimeAtLocation).getTime(),isLate:!1,track:e.TrackAtLocation,sname:e.ProductInformation[0]})))},findStops(e){return k(I.TRAIN_STATION,{},{name:e}).then(e=>e.slice(0,15).map(w))},stationMap:S};const V="https://api.vasttrafik.se/bin/rest.exe/v2",W="https://api.vasttrafik.se/ts/v1/traffic-situations";let G,B;function O(e,t){const n=t?`${W}/${t}/${e}`:W;return H(n,{Accept:"application/json"}).then(e=>e.reduce((e,{title:t,description:n,affectedLines:a})=>({messages:e.messages.concat(`${t} ${n}`),affectedLines:[].concat(e.affectedLines,a.map(({designation:e})=>e)).filter(e=>e)}),{messages:[]}))}function R(e,t){const n=new Date,a=n.toISOString().substr(0,10),s=n.toLocaleTimeString().substr(0,5),o=`${V}/trip?originId=${e}&destId=${t}&date=${a}&time=${s}&format=json`;return H(o).then(e=>Q(e.TripList.Trip).map(e=>Q(e.Leg)))}function F(e){const t=`${V}/location.name?input=${encodeURIComponent(e)}&format=json`;return H(t).then(e=>Q(e.LocationList.StopLocation).slice(0,5)).then(e=>e.map(e=>Object.assign({},e,{region:"VT"})))}function E(e){return e.map(e=>{const t=e.rtTime&&e.rtTime!==e.time,n=e.rtTime||e.time,a=e.rtDate||e.date,s=e.bgColor||"white",o=new Date(`${a}T${n}`).getTime();return Object.assign({},e,{region:"VT",cancelled:Boolean(e.cancelled),isLate:t,bgColor:s,timestamp:o})})}function x(e,t){const n=new Date,a=n.toISOString().substr(0,10),s=n.toLocaleTimeString().substr(0,5);let o=`${V}/arrivalBoard?id=${encodeURIComponent(e)}&date=${encodeURIComponent(a)}&time=${encodeURIComponent(s)}&format=json`;return t&&(o=`${o}&timeSpan=${t}`),Y(e,o).then(e=>e.ArrivalBoard.Arrival).then(E)}function U(e,t){let n=`${V}/departureBoard?id=${encodeURIComponent(e)}&format=json`;return t&&(n=`${n}&timeSpan=${t}`),Y(e,n).then(e=>e.DepartureBoard.Departure||[]).then(e=>e.filter(({journeyid:t},n)=>!e.slice(0,n).some(e=>e.journeyid===t))).then(E)}function Y(e,t){return H(t).then(e=>{const{error:t,errorText:n}=e;return(t||n)&&console.error("[getTimeTable]",t||n),e})}function j({south:e,west:t,north:n,east:a}){const s=e=>Math.round(1e6*e),o=`${V}/livemap?minx=${s(t)}&miny=${s(e)}&maxx=${s(a)}&maxy=${s(n)}&onlyRealtime=yes`;return H(o).then(({livemap:e})=>e.vehicles)}function C(e){return H(e).then(({JourneyDetail:e})=>e)}function X(e){return H(e).then(({Geometry:e})=>e)}function H(e,t){const n=Promise.resolve(),a={...t,Authorization:"Bearer "+G};return(!B||B.getTime()<Date.now())&&(console.log("Need to update authtoken"),n.then(z)),n.then(()=>fetch(e,{headers:a})).then(M)}function P({lat:e,lng:t},n=5,a=!0){const s=`${V}/location.nearbystops?originCoordLat=${e}&originCoordLong=${t}&maxNo=${2*n}&format=json`;return H(s).then(e=>{if(e.LocationList.errorText)throw new Error(e.LocationList.errorText);return e.LocationList.StopLocation?e.LocationList.StopLocation.filter(({name:e},t,n)=>{const a=n.findIndex(t=>t.name===e);return a===t}).map(e=>({...e,region:"VT"})).slice(0,n):[]}).catch(s=>{if(!a)throw console.error("[getClosestStops]",s),s;console.error("[getClosestStops]:",s,"retrying"),P({lat:e,lng:t},n,!1)})}function z(){const e="b1pZclV2c1ZGTG8zZ2FSemNaS0NUbEdJX21ZYTo4bTlLNnFsaDVNQXBWRFdRYlVWSUhneWZja3dh";return fetch("https://api.vasttrafik.se:443/token",{headers:{Authorization:"Basic "+e,"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"grant_type=client_credentials"}).then(M).then(e=>(G=e.access_token,B=new Date(Date.now()+1e3*e.expires_in),console.log("AuthToken expires "+B.toLocaleString()),e.access_token))}function M(e){return e.ok?e.json():e.json().then(e=>Promise.reject(e))}function Q(e){return e?[].concat(e):[]}function q(){return z()}var K={init:q,getClosestStop:e=>P(e,1),getClosestStops:P,findStops:F,getGeometry:X,getJourneyDetail:C,getTripSuggestion:R,getDeparturesFrom:U,getArrivalsTo:x,getTrafficSituations:O,getLiveMap:j,transformTrips:E};const ee="http://api.sl.se/api2",te={method:"GET"},ne={7:"gray",10:"#1C7F2A",11:"#1C7F2A",12:"gray",13:"#D51427",14:"#D51427",17:"#60A42B",18:"#60A42B",19:"#60A42B",21:"brown",22:"orange",25:"turquoise",26:"turquoise",27:"purple",28:"purple",29:"purple",40:"pink",41:"pink",42:"pink",43:"pink",44:"pink",45:"pink",48:"pink"};function ae(e){return ne[e]||"#A4A5A7"}function se(e){return{...e,HafasId:e.id,id:e.id.substr(-4),region:"SL"}}function oe({lat:e,lng:t},n=5){const a="bf8e1f49392843a19e86ef1ccbaa15a0",s=`nearbystops.json?key=${a}&originCoordLat=${e}&originCoordLong=${t}&maxresults=${n}`;return be(s).then(e=>{const t=Array.from(e.LocationList.StopLocation);return t.map(se)})}function ie(e){return oe(e,1)[0]}function re(e){const t="76ea4bd8c1014b6490418de04bfd0b32",n=`typeahead.json?key=${t}&searchstring=${encodeURIComponent(e)}&maxresults=5`;return be(n).then(e=>de(e.ResponseData)).then(e=>e.filter((t,n)=>{const a=e.findIndex(({SiteId:e})=>e===t.SiteId);return a>=n}).slice(0,5).map(e=>({...e,name:e.Name,id:e.SiteId,region:"SL"})))}const le={BUS:"Buss",METRO:"T-bana",SHIP:"Båt",TRAIN:"Tåg",TRAM:"Spårvagn"};function ce(e){return le[e]||e}function ue(e){const t="a312919085a9447d839109b9a6880d20",n=`realtimedeparturesV4.json?key=${t}&siteid=${e}&timewindow=30`;return be(n).then(e=>[...e.ResponseData.Buses,...e.ResponseData.Metros,...e.ResponseData.Ships,...e.ResponseData.Trains,...e.ResponseData.Trams].map(e=>({...e,fgColor:ae(e.LineNumber),bgColor:"white",direction:e.Destination,timestamp:new Date(e.ExpectedDateTime||e.TimeTabledDateTime).getTime(),time:e.TimeTabledDateTime.substr(11,5),rtTime:e.ExpectedDateTime.substr(11,5),name:`${ce(e.TransportMode)} ${e.LineNumber}`,sname:e.LineNumber,track:e.StopPointDesignation||e.JourneyDirection,region:"SL",href:"#",isLate:Boolean(e.ExpectedDateTime&&e.TimeTabledDateTime!==e.ExpectedDateTime)})))}function pe(e){const t="367eaa6107874c6e86bd985872f9cd46",n=`deviations.json?key=${t}&siteId=${e}`;return be(n).then(e=>de(e.ResponseData)).then(e=>({messages:e.map(({Details:e})=>e)}))}function me(e){return e.ok&&204!==e.status?e.json():e.ok?(console.log("fetchMiddleware: not json and no error"),e):e.json().then(e=>Promise.reject(e))}function de(e){return e&&[].concat(e)||[]}function be(e){const t=`${ee}/${e}`,n="https://request-proxy.herokuapp.com/?url="+encodeURIComponent(t);return fetch(n,te).then(me).catch(e=>console.error(e))}var ge={getClosestStop:ie,getClosestStops:oe,getDeparturesFrom:ue,getTrafficSituations:pe,findStops:re,init(){return Promise.resolve()}};n("5319");const he="bfd0187f-cbbb-4ad3-b1d3-3cc12d180ea1",fe="753bf7a9-4380-41f5-b514-61dd33c534e4",ve="https://api.resrobot.se/v2",ye={method:"GET",headers:{Accept:"application/json"}};function Te(e){return{...e,name:e.name.replace(/\([^)]*\)$/,""),region:"RR"}}function _e(e,t){const n=e.name.split(" ")[0],a=t.name.split(" ")[0];return n!==a?0:e.weight<t.weight?1:-1}async function Se({lat:e,lng:t},n=5){const a=`location.nearbystops?&originCoordLat=${e}&originCoordLong=${t}&maxNo=${n}`;return Ze(a).then(e=>e.StopLocation.map(Te).sort(_e))}function Ie(e){return Se(e,1)[0]}async function Ae(e){const t=`location.name?input=${encodeURIComponent(e)}&maxNo=5`;return Ze(t).then(e=>e.StopLocation.map(Te))}async function ke(e){const t="departureBoard?id="+e;return Ze(t,fe).then(e=>e.Departure.map(e=>({...e,fgColor:"#0080ac",bgColor:"white",timestamp:new Date(e.ExpectedDateTime||e.TimeTabledDateTime).getTime(),time:e.time.substr(0,5),rtTime:e.rtTime&&e.rtTime.substr(0,5),direction:e.direction.replace(/\([^)]*\)$/,"").replace("T-bana","").trim(),name:e.name.replace("Länstrafik - ",""),sname:e.transportNumber,track:e.rtDepTrack||e.rtTrack,region:"RR",href:"#",isLate:Boolean(e.rtTime&&e.time!==e.rtTime)})))}function De(){return Promise.resolve({messages:[]})}function we(e){return e.ok&&204!==e.status?e.json():e.ok?(console.log("fetchMiddleware: not json and no error"),e):e.json().then(e=>Promise.reject(e))}function Ze(e,t=he){const n=`${ve}/${e}&key=${t}&format=json`;return fetch(n,ye).then(we).catch(e=>console.error(e))}var Je={getClosestStop:Ie,getClosestStops:Se,getDeparturesFrom:ke,getTrafficSituations:De,findStops:Ae,init(){return Promise.resolve()}};const Le={TV:{track:"Spår",sname:"Linje"},VT:{track:"Läge",sname:"Linje"},SL:{track:"Läge",sname:"Linje"},RR:{track:"Läge",sname:"Linje"}};var Ne={VT:K,TV:$,SL:ge,RR:Je};const $e="darkMode";var Ve={name:"AppSettings",props:{className:{type:Array,default:()=>[]}},data(){return{buildTime:"Sun, 10 Oct 2021 19:27:40 GMT",apis:Object.keys(Ne),viewModes:[{value:"",name:"OS default"},{value:"dark-mode",name:"Dark mode"},{value:"light-mode",name:"Light mode"}],viewMode:"",timeSpans:[{value:"",name:"API default"},{value:"30",name:"30 min"},{value:"60",name:"1 timme"},{value:"120",name:"2 timmar"},{value:"180",name:"3 timmar"},{value:"360",name:"6 timmar"},{value:"720",name:"12 timmar"},{value:"1440",name:"24 timmar"}]}},computed:{...Object(i["e"])("trips",["filter","options"]),...Object(i["e"])("api",{apiName:({name:e})=>e,initializing:({initializing:e})=>e})},mounted(){const e=localStorage.getItem($e);e&&(this.viewMode=e,document.documentElement.classList.add(e))},methods:{...Object(i["b"])("api",["toggleApi"]),...Object(i["d"])("trips",["setOptions","setFilter"]),updateFilter({target:e}){const{name:t,value:n}=e;t&&this.setFilter({[t]:n})},updateOption({target:e}){const{name:t,checked:n}=e;t&&this.setOptions({[t]:n})},updateDarkMode({target:e}){const{name:t,value:n}=e;if(!t)return;const a=localStorage.getItem($e);a&&document.documentElement.classList.remove(a),localStorage.setItem($e,n),this.viewMode=n,n&&document.documentElement.classList.add(n)},getLongName(e){switch(e){case"TV":return"TrafikVerket";case"VT":return"VästTrafik";default:return e}}}},We=Ve,Ge=n("818b");function Be(e){this["$style"]=Ge["default"].locals||Ge["default"]}var Oe=Object(d["a"])(We,f,v,!1,Be,null,null),Re=Oe.exports,Fe=function(){var e,t,n=this,a=n.$createElement,s=n._self._c||a;return s("section",{class:n.$style.stationInfo},[s("div",{class:n.$style.form},[s("LocationInput",{attrs:{disabled:n.initializing,label:"Hållplats"}})],1),n.showArrDepSelection?s("div",{class:n.$style.arrDep},[s("button",{class:[n.$style.arrDepBtn,(e={},e[n.$style.arrDepBtnSelected]=!n.arrivals,e)],on:{click:function(e){return n.setArrivals(!1)}}},[n._v(" Avgångar ")]),s("button",{class:[n.$style.arrDepBtn,,(t={},t[n.$style.arrDepBtnSelected]=n.arrivals,t)],on:{click:function(e){return n.setArrivals(!0)}}},[n._v(" Ankomster ")])]):n._e(),s("div",{class:n.$style.content},[s("TripsTable",{attrs:{"from-to-label":n.fromToLabel}}),s("JourneyDetails"),n.location?s("footer",{class:n.$style.situations},[s("MessageCarousel",{attrs:{messages:n.mergedSituations}})],1):n._e()],1)])},Ee=[],xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.messages.length>0?n("div",{class:e.$style.carousel},[n("div",{class:e.$style.items,style:{transform:"translateX("+e.translateX+")"},on:{touchstart:e.onTouchStart}},e._l(e.messages,(function(t,a){return n("div",{key:a,class:e.$style.item},[e._v(" "+e._s(t)+" ")])})),0),n("div",{class:e.$style.dots},[n("button",{class:e.$style.playPauseBtn,on:{click:e.playPause}},[n("font-awesome",{attrs:{icon:["fas",e.intervalId?"pause":"play"]}})],1),e._l(e.messages,(function(t,a){var s;return n("button",{key:t,class:e.$style.dotBtn,on:{click:function(t){return e.setActive(a)}}},[n("div",{class:[e.$style.dot,(s={},s[e.$style.activeDot]=e.active===a,s)]})])}))],2)]):e._e()},Ue=[],Ye={name:"MessageCarousel",props:{messages:{type:Array,default:()=>[]}},data(){return{active:0,intervalId:null,wait:5e3}},computed:{translateX(){return-100*this.active+"%"}},mounted(){this.play()},beforeDestroy(){this.pause()},methods:{setActive(e){this.pause(),this.active=e,this.play()},selectNextActive(){this.active=(this.active+1)%this.messages.length},play(){this.intervalId=setInterval(this.selectNextActive,this.wait)},pause(){clearInterval(this.intervalId),this.intervalId=null},playPause(){this.intervalId?this.pause():this.play()},onTouchStart(e){const t=e.target,n=e.changedTouches[0].clientX,a=e=>{t.removeEventListener("touchend",a);const s=e.changedTouches[0].clientX,o=n-s,i=Math.abs(o)>50;i&&(o>0?this.setActive((this.active+1)%this.messages.length):this.setActive(this.active>0?this.active-1:this.messages.length-1))};t.addEventListener("touchend",a)}}},je=Ye,Ce=n("a55e");function Xe(e){this["$style"]=Ce["default"].locals||Ce["default"]}var He=Object(d["a"])(je,xe,Ue,!1,Xe,null,null),Pe=He.exports,ze=function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("aside",{class:[t.$style.journeyDetails,(e={},e[t.$style.display]=t.showJourneyDetails,e)]},[a("header",{class:t.$style.header},[a("h2",{class:t.$style.heading},[t._v("Detaljer")]),t.loadingJourneyDetails?a("font-awesome",{attrs:{icon:"spinner",spin:""}}):t._e(),a("button",{class:t.$style.closeBtn,on:{click:function(e){return e.preventDefault(),t.setShowJourneyDetails(!1)}}},[a("font-awesome",{attrs:{icon:"times"}})],1)],1),a("p",{class:t.$style.journeyMeta},[t.loadingJourneyDetails?t._e():a("span",[t._v(t._s(t.journey.name)+" mot "+t._s(t.journey.direction))]),a("a",{class:t.$style.mapLink,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.setCurrentTab("Karta")}}},[t._v("Visa på karta")])]),t.loadingJourneyDetails?t._e():a("div",{class:t.$style.stopList},t._l(t.stops,(function(e){var n;return a("div",{key:e.depTime+e.name,class:[t.$style.stop,(n={},n[t.$style.stopPassed]=e.didPass,n)]},[a("div",{class:t.$style.stopDotCell},[a("div",{class:t.$style.stopDot})]),a("div",{class:t.$style.stopTime},[t._v(t._s(e.rtDepTime||e.depTime))]),a("div",{class:t.$style.stopName},[t._v(t._s(e.name))]),a("div",{class:t.$style.stopTrack},[t._v(t._s(e.track))])])})),0)])},Me=[],Qe={name:"JourneyDetails",data(){return{now:Date.now(),timeoutId:null}},computed:{...Object(i["e"])(["showJourneyDetails","loadingJourneyDetails","selectedJourney"]),journey(){const e=this.selectedJourney;if(!e)return{};const t=[].concat(e.JourneyName);if(0===t.length)return{};const n=[].concat(e.Direction);return{name:t[0].name,direction:n[n.length-1].$}},stops(){const e=this.selectedJourney;return e?e.Stop.map(e=>{const t=new Date(`${e.depDate}T${e.depTime}`).getTime();return{...e,didPass:t<this.now}}):[]}},mounted(){this.timeoutId=setInterval(()=>{this.now=Date.now()},3e4)},beforeDestroy(){clearInterval(this.timeoutId)},methods:{...Object(i["d"])(["setShowJourneyDetails"]),...Object(i["d"])("tabs",["setCurrentTab"])}},qe=Qe,Ke=n("67f8");function et(e){this["$style"]=Ke["default"].locals||Ke["default"]}var tt=Object(d["a"])(qe,ze,Me,!1,et,null,null),nt=tt.exports,at=function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{class:[t.$style.locationInput,(e={},e[t.$style.withLabel]=t.label,e)],on:{focus:t.showDropDown,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideDropDown(e)}}},[a("label",{class:[t.$style.label]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"input",class:[t.$style.input],attrs:{disabled:t.disabled,type:"search",placeholder:t.label},domProps:{value:t.searchText},on:{input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.onInput],focus:t.showDropDown,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.selectFirstSuggestion(e)},t.handleKeyInput]}}),t.isLoading?a("font-awesome",{class:t.$style.spinner,attrs:{icon:"spinner",spin:"","aria-hidden":"true"}}):t._e(),t.selectedLocation?a("Button",{class:t.$style.resetLocationBtn,attrs:{onClick:t.resetLocation,icon:"times"}}):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.$style.suggestionsFocusTrap,on:{click:function(e){return e.preventDefault(),t.hideDropDown(e)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.$style.suggestions,style:{left:t.leftOffset,width:t.sugestionsWidth}},[t.showUseMyLocation?a("button",{class:[t.$style.suggestion,t.$style.nearbySuggestion],on:{keyup:t.handleKeyInput,click:function(e){return e.preventDefault(),t.getNearbyStops(e)}}},[a("font-awesome",{attrs:{icon:"crosshairs"}}),a("span",[t._v(t._s(t.nearbyStopsMessage))]),t.isLoadingNearbyStops?a("font-awesome",{attrs:{icon:"spinner",spin:""}}):t._e()],1):t._e(),t._l(t.allSuggestions,(function(e){return a("button",{key:e.id,class:[t.$style.suggestion,e.isFavorite&&t.$style.suggestionFavorite],on:{keyup:[t.handleKeyInput,function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:t.onSelect(e)}],click:function(n){return n.preventDefault(),t.onSelect(e)}}},[t._v(" "+t._s(e.name)+" "),a("a",{attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),t.favourize(e)}}},[a("font-awesome",{attrs:{icon:"heart"}})],1)])})),!t.searchText||t.stops.length||t.isLoading?t._e():a("button",{class:t.$style.suggestion,on:{click:function(e){e.preventDefault()}}},[t._v(" Inga resultat för söktermen ")])],2)])},st=[],ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:[e.$style.button,e.className],attrs:{type:e.type,title:e.title},on:{click:function(t){return t.preventDefault(),e.onClick(t)}}},[e._v(" "+e._s(e.text)+" "),e.icon?n("font-awesome",{attrs:{icon:["fas",e.icon]}}):e._e()],1)},it=[],rt={name:"Button",props:{className:{type:String,default:""},type:{type:String,default:"button"},title:{type:String,default:""},onClick:{type:Function,default:()=>{}},text:{type:String,default:""},icon:{type:String,default:null}}},lt=rt,ct=n("8f6b");function ut(e){this["$style"]=ct["default"].locals||ct["default"]}var pt=Object(d["a"])(lt,ot,it,!1,ut,null,null),mt=pt.exports;function dt(e,t,n){let a;return n=n||this,(...s)=>{a&&clearTimeout(a),a=setTimeout(()=>e.apply(n,s),t)}}const bt={ArrowUp:"previousElementSibling",ArrowDown:"nextElementSibling"};var gt={name:"LocationInput",components:{Button:mt},props:{label:{type:String,default:""},disabled:{type:Boolean,default:!1}},data(){return{show:!1,searchText:"",leftOffset:0,sugestionsWidth:"auto"}},computed:{...Object(i["c"])({isLoadingNearbyStops:"user/isLoading"}),...Object(i["e"])({apiName:({api:e})=>e.name}),...Object(i["e"])("user",["nearbyStops","nearbyStopsError"]),...Object(i["e"])("stops",["stops","isLoading","favorites"]),...Object(i["e"])({userLocation:({user:e})=>e.location,selectedLocation:({trips:e})=>e.location}),nearbyStopsMessage(){return this.isLoadingNearbyStops?"Hämtar närliggande hållplatser":this.nearbyStopsError||"Använd min plats"},showUseMyLocation(){return!this.searchText&&!this.nearbyStops.length},showNearbyStops(){return!this.searchText&&this.nearbyStops.length},hasSuggestions(){return this.stops.length||this.nearbyStops.length},filteredNearbyStops(){return this.showNearbyStops?this.nearbyStops:[]},allSuggestions(){const e=this.favorites.filter(({region:e})=>e===this.apiName),t=e.map(({id:e})=>e),n=({id:e})=>!t.includes(e);return[...e,...this.filteredNearbyStops.filter(n),...this.stops.filter(n)]}},watch:{selectedLocation(e){e||(this.searchText="")}},mounted(){this.debouncedFindStops=dt(this.findStops,350,this),this.selectedLocation&&(this.searchText=this.selectedLocation.name,this.debouncedFindStops(this.selectedLocation.name));const{offsetLeft:e,clientWidth:t}=this.$refs.input;this.leftOffset=e+"px",this.sugestionsWidth=t+2+"px"},methods:{...Object(i["b"])("user",["getUserLocation","getNearbyStops"]),...Object(i["b"])("stops",["findStops","addFavorite","removeFavorite"]),...Object(i["b"])("trips",["updateLocation"]),onInput({target:{value:e}}){this.debouncedFindStops(e)},onSelect(e){this.searchText=e.name,this.updateLocation(e),this.hideDropDown(),this.findStops(e.name).then(this.hideDropDown)},selectFirstSuggestion(){0!==this.stops.length&&this.onSelect(this.stops[0])},favourize(e){e.isFavorite?this.removeFavorite(e):this.addFavorite({...e,isFavorite:!0})},handleKeyInput({key:e}){const t=`.${this.$style.suggestions} button`,n=t=>t[bt[e]];if(["ArrowDown","ArrowUp"].includes(e)&&this.show&&this.hasSuggestions){const e=this.$el.querySelector(t+":focus");if(e){const t=n(e);t&&t.focus()}else this.$el.querySelector(t).focus()}},showDropDown(){this.show=!0},hideDropDown(){this.show=!1,document.activeElement.blur()},resetLocation(){this.updateLocation(null)}}},ht=gt,ft=n("c11a");function vt(e){this["$style"]=ft["default"].locals||ft["default"]}var yt=Object(d["a"])(ht,at,st,!1,vt,null,null),Tt=yt.exports,_t=function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{class:[t.$style.tripsTable,(e={},e[t.$style.VT]="VT"===t.apiName,e[t.$style.TV]="TV"===t.apiName,e[t.$style.SL]="SL"===t.apiName,e[t.$style.SL]="RR"===t.apiName,e[t.$style.showingJourneyDetails]=t.showJourneyDetails,e)]},[a("table",{class:t.$style.table},[a("thead",{class:t.$style.tableHead},[a("tr",[a("th",[t._v(t._s(t.metaLabel))]),a("th",[t._v(t._s(t.fromToLabel))]),a("th",[t._v("Tid")]),a("th",{class:t.$style.tripNewTime},[t._v("Ny tid")]),a("th",[t._v(t._s(t.trackLabel))]),t.hasNotes?a("th",[t._v("Anm")]):t._e()])]),a("tbody",{class:t.$style.tableBody},[t._l(t.trips,(function(e){var n,s,o;return a("tr",{key:e.id,class:[t.$style.trip],on:{click:function(n){return t.getJourneyDetails(e)}}},[a("td",{class:t.$style.tripLine,style:{"--trip-bg-color":e.fgColor,"--trip-text-color":e.bgColor}},[t._v(" "+t._s(e.sname)+" ")]),a("td",{class:t.$style.tripDest},[a("div",[a("span",{class:t.$style.tripName},[t._v(t._s(e.direction||e.origin))])]),a("div",{class:t.$style.tripVia},[e.via?a("small",[t._v("via "+t._s(t._f("unbreakMySpace")(e.via)))]):t._e()])]),a("td",{class:t.$style.tripTime},[a("span",{class:["only-mobile",(n={},n[t.$style.isLate]=e.isLate,n[t.$style.strikeOut]=e.cancelled,n)]},[t._v(" "+t._s(e.rtTime||e.time)+" ")]),e.isLate?t._e():a("span",{class:["from-tablet",(s={},s[t.$style.strikeOut]=e.cancelled,s)]},[t._v(t._s(e.time))])]),a("td",{class:[t.$style.tripNewTime,t.$style.isLate,(o={},o[t.$style.strikeOut]=e.cancelled,o)]},[e.isLate?a("span",[t._v(t._s(e.rtTime))]):t._e()]),a("td",{class:t.$style.tripTrack},[t._v(t._s(e.rtTrack||e.track))]),t.hasNotes?a("td",{class:t.$style.tripNote},[e.cancelled?a("span",[t._v("Inställd")]):t._e(),e.remark?a("span",[t._v(t._s(e.remark))]):t._e()]):t._e()])})),a("tr",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&t.location&&0===t.trips.length,expression:"!isLoading && location && trips.length === 0"}]},[a("td",{attrs:{colspan:"5"}},[t._v("Inga resor att visa")])])],2)])])},St=[],It=n("1dae"),At=n("3fbe");const kt="speechSynthesis"in window;let Dt,wt;function Zt(){Dt=window.speechSynthesis.getVoices(),wt=Dt.find(e=>/Alva/i.test(e.name))}function Jt(e){if(kt){var t=new SpeechSynthesisUtterance;t.text=e,t.volume=1,t.rate=.9,t.pitch=1,wt?t.voice=wt:console.log("Could not select voice"),window.speechSynthesis.speak(t)}}kt&&Zt(),window.speechSynthesis.onvoiceschanged=Zt;It["a"].addLocale(At);const Lt=" ",Nt=new It["a"]("sv",{style:"narrow"}),$t=e=>{const[t,n]=String(e).split(":"),a=Date.now(),s=new Date;s.setHours(t),s.setMinutes(n);const o=(s-a)/1e3/60;return o<-20?o+1440:o};var Vt={name:"TripsTable",filters:{humanTime(e){const t=$t(e);return t>20?e:t<1?"Nu":Nt.format(t,"minute").slice(1).replace(" ",Lt)},unbreakMySpace(e){return e.includes(" ")?e.replace(" ",Lt):e}},props:{fromToLabel:{type:String,default:""}},computed:{hasNotes(){return this.trips.some(({cancelled:e,remark:t})=>Boolean(e||t))},...Object(i["e"])({showJourneyDetails:e=>e.showJourneyDetails,apiName:({api:e})=>e.name}),...Object(i["e"])("trips",{isLoading:({isLoading:e})=>e,location:({location:e})=>e,doSpeak:({options:e})=>e.voice}),...Object(i["c"])({trips:"trips/filteredTrips"}),...Object(i["c"])("api",["dict"]),metaLabel(){return this.dict.sname},trackLabel(){return this.dict.track}},watch:{trips(e){e&&0!==e.length&&this.speak(e)}},mounted(){this.speak=dt(this.speak,250,this)},methods:{...Object(i["b"])(["getJourneyDetails"]),speak(e){if(e.length<1||!this.doSpeak)return;const{name:t,direction:n,timestamp:a,cancelled:s}=e[0],o=e[0].via&&`via ${e[0].via},`||"",i=Math.ceil((a-Date.now())/6e4);Jt(s?`${t} mot ${n}, ${o} är inställd`:i<=0?`${t} mot ${n}, ${o} avgår nu`:1===i?`${t} mot ${n}, ${o} avgår om en minut`:i>1&&i<=60?`${t} mot ${n}, ${o} avgår om ${i} minuter`:`${t} mot ${n}, ${o} avgår om mer än en timma`)}}},Wt=Vt,Gt=n("55a3");function Bt(e){this["$style"]=Gt["default"].locals||Gt["default"]}var Ot=Object(d["a"])(Wt,_t,St,!1,Bt,null,null),Rt=Ot.exports;const Ft={arrival:{name:"Ankomst",arrEaves:"Ankommer",origDest:"Från"},departure:{name:"Avgång",arrEaves:"Avgår",origDest:"Till"}};var Et={name:"StationInfo",components:{LocationInput:Tt,JourneyDetails:nt,TripsTable:Rt,MessageCarousel:Pe},computed:{...Object(i["e"])("trips",["arrivals","location","situations","manualSituations"]),...Object(i["e"])("api",{apiName:({name:e})=>e,initializing:({initializing:e})=>e}),showArrDepSelection(){return"function"===typeof this.api.getArrivalsTo},mergedSituations(){const e=this.location&&this.location.name;if(!e)return[];const t=Date.now(),n=this.manualSituations.filter(n=>{const a=n.location===e,s=n.validFrom<t&&n.validUntil>t;return a&&s}).map(({message:e})=>e);return this.situations.messages.concat(n)},...Object(i["c"])("api",["api"]),dict(){return this.arrivals?Ft.arrival:Ft.departure},show(){return!!this.trips.length},fromToLabel(){return this.arrivals?"Från":"Till"},arriveDepartLabel(){return this.arrivals?"Ankommer":"Avgår"}},watch:{arrivals(e,t){e!==t&&this.location&&this.getTrips(this.location)},apiName(e,t){e!==t&&clearTimeout(this.lastTimeoutId)}},beforeDestroy(){clearTimeout(this.lastTimeoutId)},methods:{...Object(i["b"])("trips",["getTrips"]),...Object(i["d"])("trips",["setArrivals"])}},xt=Et,Ut=n("aeaf");function Yt(e){this["$style"]=Ut["default"].locals||Ut["default"]}var jt=Object(d["a"])(xt,Fe,Ee,!1,Yt,null,null),Ct=jt.exports,Xt=function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("aside",{class:[t.$style.contaier,(e={},e[t.$style.contaierVisible]=t.beforeInstallPrompt,e)]},[a("img",{class:t.$style.img,attrs:{src:"img/icons/android-chrome-512x512.png",alt:"app logo"}}),a("h3",{class:t.$style.heading},[t._v("Lägg till på hemskärmen?")]),a("p",{class:t.$style.website},[t._v(t._s(t.url))]),a("div",{class:t.$style.actions},[a("a",{class:t.$style.link,attrs:{href:"#"},on:{click:t.closeToaster}},[t._v("Avbryt")]),a("a",{class:t.$style.link,attrs:{href:"#"},on:{click:t.onAddToHomeScreen}},[t._v("Lägg till")])])])},Ht=[],Pt={name:"InstallToHomeScreenPrompt",data(){return{prompted:!1,url:""}},computed:{...Object(i["e"])(["beforeInstallPrompt"])},mounted(){this.url=window.location.href.replace(/\/$/,"")},methods:{...Object(i["d"])(["setBeforeInstallPrompt"]),closeToaster(){this.setBeforeInstallPrompt(null)},onAddToHomeScreen(){this.prompted||(this.beforeInstallPrompt.prompt(),this.prompted=!0,this.beforeInstallPrompt.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),this.closeToaster()}))}}},zt=Pt,Mt=n("0622");function Qt(e){this["$style"]=Mt["default"].locals||Mt["default"]}var qt=Object(d["a"])(zt,Xt,Ht,!1,Qt,null,null),Kt=qt.exports,en=function(){var e,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{class:[t.$style.updateAvailable,(e={},e[t.$style.updateAvailableActive]=t.hasUpdate,e)]},[t._v(" 🎉 "),a("strong",[t._v("Uppdatering tillgänglig")]),t._v(" 🎉 "),a("br"),a("a",{class:t.$style.reloadLink,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.reload(e)}}},[t._v("Ladda om")]),t._v(" för att uppdatera 😆 "),a("Button",{attrs:{icon:"times",className:t.$style.closeBtn,onClick:t.closeUpdateToaster,title:"Stäng"}})],1)},tn=[],nn={name:"UpdateAvailable",components:{Button:mt},computed:{...Object(i["e"])({hasUpdate:e=>e.updateAvailable})},methods:{...Object(i["d"])(["setUpdateAvailable"]),closeUpdateToaster(){this.setUpdateAvailable(!1)},reload(){window.location.reload()}}},an=nn,sn=n("23f2");function on(e){this["$style"]=sn["default"].locals||sn["default"]}var rn=Object(d["a"])(an,en,tn,!1,on,null,null),ln=rn.exports,cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isOnline?e._e():n("div",{class:e.$style.offlineIndicator},[e._v(" Ingen internetanslutning 😥 ")])},un=[],pn={name:"OfflineIndicator",computed:{...Object(i["e"])({isOnline:e=>e.online})}},mn=pn,dn=n("699f");function bn(e){this["$style"]=dn["default"].locals||dn["default"]}var gn=Object(d["a"])(mn,cn,un,!1,bn,null,null),hn=gn.exports,fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{class:e.$style.tabs},e._l(e.tabs,(function(t){var a;return n("li",{key:t.name,class:[e.$style.tab,t.className,(a={},a[e.$style.tabSmall]=t.small,a[e.$style.tabActive]=e.showSettings?"Inställningar"===t.name:e.currentTab===t.name,a[e.$style.tabDisabled]=t.disabled,a)]},[n("a",{class:e.$style.link,attrs:{title:t.name,href:"#"},on:{click:function(e){return e.preventDefault(),t.onClick(t)}}},[t.icon?n("font-awesome",{class:e.$style.icon,attrs:{icon:t.icon}}):e._e(),t.onlyIcon?e._e():n("span",{class:[e.$style.text]},[e._v(e._s(t.name))])],1)])})),0)},vn=[],yn={name:"TabsComponent",props:{tabs:{type:Array,default:()=>[]},currentTab:{type:String,default:""},showSettings:{type:Boolean,default:!1}}},Tn=yn,_n=n("6f5f");function Sn(e){this["$style"]=_n["default"].locals||_n["default"]}var In=Object(d["a"])(Tn,fn,vn,!1,Sn,null,null),An=In.exports;const kn=[{name:"Hållplats",componentName:"station-info",icon:["fas","map-marker-alt"]},{name:"Karta",componentName:"map-component",icon:"map"},{name:"Inställningar",componentName:"app-settings",icon:"cog",small:!0,onlyIcon:!0}],Dn={currentTab:kn[0].name},wn={setCurrentTab(e,t){e.currentTab=t}};var Zn={namespaced:!0,state:Dn,mutations:wn},Jn={name:"App",components:{Header:h,Tabs:An,StationInfo:Ct,AppSettings:Re,MapComponent:()=>n.e("chunk-8cd433a8").then(n.bind(null,"a0be")),DisturbanceComponent:()=>n.e("chunk-f72d3250").then(n.bind(null,"ca0c")),UpdateAvailable:ln,OfflineIndicator:hn,InstallToHomeScreenPrompt:Kt},data(){return{timeoutId:null,showSettings:!1}},computed:{...Object(i["e"])({apiName:({api:e})=>e.name}),...Object(i["e"])("tabs",["currentTab"]),...Object(i["e"])("trips",["location"]),...Object(i["c"])("api",["api"]),tabs(){return kn.map(e=>({...e,onClick:this.changeTab}))},currentTabComponent(){return this.tabs.find(({name:e})=>e===this.currentTab)}},watch:{location(e,t){e?e.id!==(t&&t.id)&&(clearTimeout(this.timeoutId),this.getTripsAgainAndAgain()):clearTimeout(this.timeoutId)},apiName(){"function"!==typeof this.api.getArrivalsTo&&this.setArrivals(!1)}},mounted(){this.location&&this.getTripsAgainAndAgain()},methods:{...Object(i["d"])("tabs",["setCurrentTab"]),...Object(i["d"])("trips",["setArrivals"]),...Object(i["b"])("trips",["getTrips"]),toggleSettings(){this.showSettings=!this.showSettings},changeTab({name:e}){"Inställningar"===e?this.toggleSettings():(this.showSettings=!1,this.setCurrentTab(e))},getTripsAgainAndAgain(){window.requestAnimationFrame(()=>{this.getTrips(),this.timeoutId=setTimeout(()=>this.getTripsAgainAndAgain(),3e4)})}}},Ln=Jn,Nn=n("5bb9");n("b0a0");function $n(e){this["$style"]=Nn["default"].locals||Nn["default"]}var Vn=Object(d["a"])(Ln,s,o,!1,$n,null,null),Wn=Vn.exports,Gn=n("bfa9");const Bn={isSupported:"geolocation"in navigator,isLoading:{location:!1,nearbyStops:!1},location:null,consented:null,nearbyStops:[],nearbyStopsError:""},On={isLoading({isLoading:e}){return e.location||e.nearbyStops}},Rn={async getNearbyStops({commit:e,dispatch:t,state:n,rootState:a,rootGetters:s}){n.isSupported&&(n.location||await t("getUserLocation"),e("setLoading",{nearbyStops:!0}),s["api/api"].getClosestStops(n.location).then(t=>{console.log("nearbyStops",t),t&&t.length&&t[0].region===a.api.name?e("setNearbyStops",t):(e("setNearbyStopsError","Hittade ingen närliggande hållplats 😥"),setTimeout(()=>e("setNearbyStopsError",""),7e3)),e("setLoading",{nearbyStops:!1})}).catch(t=>{console.error(t),e("setLoading",{nearbyStops:!1}),e("setNearbyStopsError","Något gick snett 😱")}))},getUserLocation({commit:e,state:t}){return t.isSupported?(e("setLoading",{location:!0}),new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)}).then(t=>{e("setLoading",{location:!1}),e("setConsented",!0),e("setLocation",t.coords)}).catch(t=>{console.log("Could not get position"),console.error(t),e("setLoading",{location:!1}),e("setConsented",!1)})):Promise.resolve()}},Fn={setLoading(e,t){e.isLoading={...e.loading,...t}},setConsented(e,t){e.consented=t},setLocation(e,t){e.location={lat:t.latitude,lng:t.longitude}},setNearbyStops(e,t){e.nearbyStops=t,e.nearbyStopsError=""},setNearbyStopsError(e,t){e.nearbyStopsError=t}};var En={namespaced:!0,state:Bn,getters:On,actions:Rn,mutations:Fn};const xn={baseUrl:"https://sheets.googleapis.com/v4/spreadsheets",API_KEY:"AIzaSyBqEDcu-o3wuB8Fwn31yIF84qKwSIUIeEg"},Un={Linje:"sname",Hpl:"origin",Till:"direction",Via:"via","Läge":"track",Anm:"remark",Tid:"time","Ny tid":"rtTime",Datum:"date","Bakgrundsfärg":"fgColor","Textfärg":"bgColor"},Yn={manualDepartures:{fileId:"1XSzg87FgHsxUl6UqNfRJtYIkw8wyN0yB3RzIib3JsvM",tabName:"Manuella%20linjer"},trafficInformation:{fileId:"1XSzg87FgHsxUl6UqNfRJtYIkw8wyN0yB3RzIib3JsvM",tabName:"Trafikinformation"}};function jn({fileId:e,tabName:t}){return fetch(`${xn.baseUrl}/${e}/values/${t}?key=${xn.API_KEY}`).then(e=>e.json())}function Cn(e){return t=>e.reduce((e,n,a)=>({...e,[n]:t[a]}),{})}function Xn(){return jn(Yn.manualDepartures).then(({values:e})=>{const[t,...n]=e,a=t.map(e=>Un[e]||e);return n.map(Cn(a)).map(e=>{const t=e.rtTime||e.time,n=e.date&&t;return e.timestamp=n?new Date(`${e.date} ${t}`).getTime():Date.now(),e.bgColor=e.bgColor||"black",e})})}function Hn(){return jn(Yn.trafficInformation).then(({values:e})=>{const[,...t]=e,n=["location","message","validFrom","validUntil"];return t.map(Cn(n)).map(e=>(e.validFrom=new Date(e.validFrom),e.validUntil=new Date(e.validUntil),e))})}const Pn=/\s*via\s*/;function zn(e){if(Pn.test(e.direction)){const[t,n]=e.direction.split(Pn);return Object.assign({},e,{direction:t,via:n})}return e}const Mn={track:"",dest:"",timeSpan:""},Qn={messages:[],affectedLines:[]},qn={isLive:!0,voice:!1},Kn=Object.keys(Mn),ea=Object.keys(qn),ta={arrivals:!1,filter:{...Mn},options:{...qn},trips:[],manualTrips:[],situations:{...Qn},manualSituations:[],isLoading:!1,location:null},na={filteredTrips({trips:e,manualTrips:t,location:n,filter:a,situations:s}){const{track:o,dest:i}=a,{affectedLines:r=[]}=s,l=Date.now(),c=t.filter(({origin:e,timestamp:t})=>{if(!n)return!1;const a=e===n.name,s=t>=l;return a&&s}),u=[...c,...e];return console.log("merged",u),u.map(e=>({...e,isAffected:r.includes(e.sname)})).filter(e=>!o||e.track===o).filter(({direction:e,origin:t})=>!i||(e===i||t===i)).sort((e,t)=>e.timestamp-t.timestamp)}},aa={loadManualDepartures({commit:e}){Xn().then(t=>{e("setManualTrips",Ne.VT.transformTrips(t))}),Hn().then(t=>{e("setManualSituations",t)})},getTrips({commit:e,state:t,rootGetters:n},a=t.location){if(!a)return e("setTrips",[]);const s=t.arrivals?n["api/api"]["getArrivalsTo"]:n["api/api"]["getDeparturesFrom"];return e("setLoading",!0),s(a.id,t.filter.timeSpan).then(t=>{const n=t.map(zn);console.log("[getTrips]",n),e("setTrips",n),e("setLoading",!1)}).catch(t=>{console.error("[getTrips]",t),e("setLoading",!1)})},getTrafficSituations({commit:e,rootGetters:t},n){return n?t["api/api"].getTrafficSituations(n.id,"stoparea").then(t=>{const n=t.messages.filter((e,t,n)=>!n.slice(0,t).some(t=>t===e));console.log("situations",t),e("setSituations",{...t,messages:n})}).catch(e=>console.error("[getTrafficSituations]",e)):e("setSituations",{...Qn})},updateLocation({dispatch:e,commit:t,state:n},a){n.location!==a&&(console.log("[updateLocation]",a),t("setLocation",a),a?(e("getTrips",a),e("getTrafficSituations",a)):t("reset"))}},sa={reset(e){e.trips=[],e.filter={...Mn},e.location=null,e.situations={...Qn}},setFilter(e,t){if(!Object.keys(t).every(e=>Kn.includes(e)))return console.error("[setFilter]","Non valid key(s) supplied, must be one of",Kn);e.filter={...e.filter,...t}},setOptions(e,t){if(!Object.keys(t).every(e=>ea.includes(e)))return console.error("[setOptions]","Non valid key(s) supplied, must be one of",ea);e.options={...e.options,...t}},setTrips(e,t){e.trips=t},setManualTrips(e,t){e.manualTrips=t},setManualSituations(e,t){e.manualSituations=t},setSituations(e,t){e.situations=t},setLoading(e,t){e.isLoading=t},setLocation(e,t){e.location=t},setArrivals(e,t){e.arrivals=t}};var oa={namespaced:!0,state:ta,getters:na,actions:aa,mutations:sa};const ia={stops:[],isLoading:!1,favorites:[]},ra={};let la;const ca={findStops({commit:e,rootGetters:t},n){return n?(la=n,e("setLoading",!0),t["api/api"].findStops(n).then(t=>(console.log("stops",t),la===n?(e("setLoading",!1),e("setStops",t)):console.log("skipping response"),t)).catch(t=>{console.error(t),e("setLoading",!1)})):e("setStops",[])},addFavorite({commit:e,state:t},n){e("setFavorites",[...t.favorites,n])},removeFavorite({commit:e,state:t},n){const a=t.favorites.filter(e=>{const t=e.id===n.id&&e.name===n.name;return!t});e("setFavorites",a)}},ua={setStops(e,t){e.stops=t},setLoading(e,t){e.isLoading=t},setFavorites(e,t){e.favorites=t}};var pa={namespaced:!0,state:ia,getters:ra,actions:ca,mutations:ua};const ma=Object.keys(Ne),da="VT";if(!ma.includes(da))throw new Error("defaultApi must exist");const ba=[],ga={name:da,initializing:!0},ha={api({name:e}){return Ne[e]},dict({name:e}){return Le[e]}},fa={setApi(e,t){e.name=t},setInitializing(e,t){e.initializing=t}},va={initApi({commit:e,state:t}){console.info("initializing",t.name),e("setInitializing",!0),Ne[t.name].init().then(()=>{e("setInitializing",!1),ba.push(t.name)}).catch(t=>{console.error("[initApi]",t),e("setInitializing",!1)})},toggleApi({state:e,commit:t,dispatch:n},a){const s=ma.indexOf(e.name),o=(s+1)%ma.length,i=a||ma[o],r=ba.includes(i);t("setApi",i),t("trips/reset",null,{root:!0}),t("stops/setStops",[],{root:!0}),r||n("initApi")}};var ya={namespaced:!0,state:ga,getters:ha,mutations:fa,actions:va};a["a"].use(i["a"]);const Ta=new Gn["a"]({storage:window.localStorage,reducer:({trips:e,api:t,stops:n})=>({trips:e,api:t,stops:n})});var _a=new i["a"].Store({strict:!1,state:{online:!0,beforeInstallPrompt:null,selectedJourney:null,updateAvailable:!1,showJourneyDetails:!1,loadingJourneyDetails:!1},getters:{},mutations:{setOnline(e,t){e.online=t},setBeforeInstallPrompt(e,t){e.beforeInstallPrompt=t},setUpdateAvailable(e,t){e.updateAvailable=t},selectJourney(e,t){e.selectedJourney=t},setShowJourneyDetails(e,t){e.showJourneyDetails=t},setLoadingJourneyDetails(e,t){e.loadingJourneyDetails=t}},actions:{getJourneyDetails({commit:e,state:t},n){if("VT"!==t.api.name||!n.JourneyDetailRef)return console.log("[getJourneyDetails]","only available for VT"),Promise.resolve();e("setShowJourneyDetails",!0),e("setLoadingJourneyDetails",!0),Ne.VT.getJourneyDetail(n.JourneyDetailRef.ref).then(t=>{e("selectJourney",t),e("setLoadingJourneyDetails",!1)}).catch(t=>{console.error("[getJourneyDetails]",t),e("setLoadingJourneyDetails",!1)})}},modules:{api:ya,user:En,trips:oa,stops:pa,tabs:Zn},plugins:[Ta.plugin]}),Sa=n("9483");_a.commit("setOnline",navigator.onLine),window.addEventListener("offline",()=>_a.commit("setOnline",!1)),window.addEventListener("online",()=>_a.commit("setOnline",!0)),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),_a.commit("setBeforeInstallPrompt",e)}),Object(Sa["a"])("/rasmus2.0/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached(){console.log("Content has been cached for offline use.")},updated(){_a.commit("setUpdateAvailable",!0),console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var Ia=n("ecee"),Aa=n("c074"),ka=n("ad3d");Ia["c"].add(Aa["b"],Aa["h"],Aa["k"],Aa["m"],Aa["f"],Aa["n"],Aa["a"],Aa["j"],Aa["e"],Aa["l"],Aa["p"],Aa["o"],Aa["g"],Aa["c"],Aa["i"],Aa["d"]),a["a"].component("FontAwesome",ka["a"]),a["a"].config.productionTip=!1,_a.dispatch("api/initApi"),_a.dispatch("trips/loadManualDepartures"),new a["a"]({store:_a,render:e=>e(Wn)}).$mount("#app")},"5bb9":function(e,t,n){"use strict";var a=n("a7d4"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"5e98":function(e,t,n){"use strict";var a=n("08b8"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"67f8":function(e,t,n){"use strict";var a=n("f04e"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"699f":function(e,t,n){"use strict";var a=n("ed59"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"6f5f":function(e,t,n){"use strict";var a=n("33fd"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"818b":function(e,t,n){"use strict";var a=n("babd"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},"8f6b":function(e,t,n){"use strict";var a=n("b634"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},9155:function(e,t,n){e.exports={contaier:"InstallToHomeScreenPrompt_contaier_3yw4Y",contaierVisible:"InstallToHomeScreenPrompt_contaierVisible_2Q7mx",img:"InstallToHomeScreenPrompt_img_3D90F",heading:"InstallToHomeScreenPrompt_heading_1-dbU",website:"InstallToHomeScreenPrompt_website_eSrKp",actions:"InstallToHomeScreenPrompt_actions_3xpKI",link:"InstallToHomeScreenPrompt_link_rlOCo",closeBtn:"InstallToHomeScreenPrompt_closeBtn_3qdZY"}},a55e:function(e,t,n){"use strict";var a=n("e53a"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},a7d4:function(e,t,n){e.exports={app:"App_app_3cl75",container:"App_container_1yQEW",appSettings:"App_appSettings_1NzGp",appSettingsVisible:"App_appSettingsVisible_mg3Gt"}},aeaf:function(e,t,n){"use strict";var a=n("c14f"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},b0a0:function(e,t,n){"use strict";n("452c")},b634:function(e,t,n){e.exports={button:"Button_button_Mvymr"}},babd:function(e,t,n){e.exports={container:"AppSettings_container_2xykw",label:"AppSettings_label_1Ehsb",apis:"AppSettings_apis_2pMDD",apiBtn:"AppSettings_apiBtn_2GA-n",apiBtnActive:"AppSettings_apiBtnActive_3atPf",timeSpan:"AppSettings_timeSpan_1ETtM",voiceCheckbox:"AppSettings_voiceCheckbox_2RGbB"}},c11a:function(e,t,n){"use strict";var a=n("0555"),s=n.n(a);n.d(t,"default",(function(){return s.a}))},c14f:function(e,t,n){e.exports={stationInfo:"StationInfo_stationInfo_1Dt3D",form:"StationInfo_form_3BKgO",content:"StationInfo_content_3LXMa",arrDep:"StationInfo_arrDep_wi-3d",arrDepBtn:"StationInfo_arrDepBtn_1xukr",arrDepBtnSelected:"StationInfo_arrDepBtnSelected_gx66p",situations:"StationInfo_situations_nDEmL"}},e53a:function(e,t,n){e.exports={carousel:"MessageCarousel_carousel_2z3mA",playPauseBtn:"MessageCarousel_playPauseBtn_3CJmV",items:"MessageCarousel_items_36jYK",item:"MessageCarousel_item_18VK5",dots:"MessageCarousel_dots_33JNz",dotBtn:"MessageCarousel_dotBtn_hdtJx",dot:"MessageCarousel_dot_3Sbfj",activeDot:"MessageCarousel_activeDot_1Ti6v"}},ed59:function(e,t,n){e.exports={offlineIndicator:"OfflineIndicator_offlineIndicator_RWCJm"}},f04e:function(e,t,n){e.exports={journeyDetails:"JourneyDetails_journeyDetails_3YAJj",display:"JourneyDetails_display_nRo1Q",header:"JourneyDetails_header_2FVDd",heading:"JourneyDetails_heading_1u5lY",closeBtn:"JourneyDetails_closeBtn_2AamI",journeyMeta:"JourneyDetails_journeyMeta_2_eYX",mapLink:"JourneyDetails_mapLink_1boUP",stopList:"JourneyDetails_stopList_2AU0a",stop:"JourneyDetails_stop_1ijip",stopDotCell:"JourneyDetails_stopDotCell_1gJ_N",stopDot:"JourneyDetails_stopDot_-Ig6N",stopPassed:"JourneyDetails_stopPassed_3heFC",stopTime:"JourneyDetails_stopTime_SRZYM",stopName:"JourneyDetails_stopName_1ry27",stopTrack:"JourneyDetails_stopTrack_1BnIw"}}});
//# sourceMappingURL=app.4817f68a.js.map